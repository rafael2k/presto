<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
          "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<link rel=stylesheet href="../../coredoc/coredoc.css" />
<title>Module: Auth</title>
</head>

<body>

<h1>Module: Auth</h1>

<h2>About this module</h2>

The Auth module administrates all persistent FTP and HTTP authentication information, and the general UI actions (via WindowCommander) required to ask the user about the username and password

<p>
Supported protocols:
<p>
<UL>
<li> <a href="http://www.ietf.org/rfc/rfc2617.txt">HTTP 1.1</a>
<li> <a href="http://www.ietf.org/rfc/rfc959.txt">FTP</a>
</UL>


<h2>Interface overview and API documentation</h2>

<p><a href="api/index.html">API documentation generated by
Doxygen</a> contains all necessary information for the external APIs.</p>

<h2>Implementation description</h2>

<p><a href="all/index.html">API documentation generated by
Doxygen</a> contains information about the internal organization of the module.</p>

<h3>The URL_Rep class </h3>

<h3>Authentication_Manager</h3>

<p> The URL manager maintains the following</p>
<ul>
<li> All currently entered HTTP and FTP passwords
<li> A list of all th epending requests for passwords on a HTTP and FTP password
<li> A number of UI actions related to the above list
<li> The module also contain a number of authentication related fucntions defined in classes primarily maintained by the URL module. 
</ul>

<h3>Basic Authentication element</h3>

<p>Contains the credentials for FTP and normal unprotected HTTP credentials (known as Basic Authentication)</p>

<h3>Digest Authentication</h3>

<p>Contains the state of the credentials for HTTP authentication using Digest Authentication</p>

<h3>Footprint</h3>

<p>The module is moderately. </p>

<p>Various features can be enabled or disabled, either thorugh feature defines or specific defines, one example is the Diegest Authentication functionality.</p>

<p>Due to the requirements from various modules (including the url module) and platforms it is very difficult to reduce the footprint<p>

<h3>Dynamic memory use and OOM handling</h3>

<dl>
<dt>OOM policies
<dd><p>Most of internal module functions handles OOM locally, and signals an OOM by raising the OOM signal in the memory manager, and aborts the current action. If appropriate a message is posted to the document.</p>
<p>However, much of the public API is now LEAVE based, and in those cases the caller must TRAP errors and handle them. Some internal functions will also LEAVE, but these are TRAPed internally</p>

<dt>Who handles OOM?
<dd>In the case of LEAVE functions the caller must TRAP the errors, and handle the OOM situations. In the case of the internal functions these usually aborts their operation with an error message, and a raised status flag, which must be handled either by the caller, or the document.

<dt>Flow
<dd><p>Much of the module is message callback based, and these functions are not able to report OOM situations directly to the documents or UI. In these cases the current operation will be terminated, and errormessages sent.</p>

<p> Much of the external API is based on direct calls, but some classes do use virtual fucntions. In many cases these are LEAVE bases, and callers must TRAP them and handle them appropriately.</p>

<dt>Heap memory usage
<dd><p>Memory is allocated for each authentication credential stored. This usually amounts to a few hundred bytes per credentials, although Digest may require more.</p>

<dt>Stack memory usage
<dd><p>Usually large objects are allocated. In some cases sizeable objects are placed on the stack but only for shorter periods.</p> 

<p>In most cases stack consumption should be less than 300 bytes.</p>

<dt>Static memory usage
<dd><p>Some const arrays are maintained, and some persistent data is kept in the URL Manager.</p>

<dt>Caching and freeing memory
<dd><p>Credentials are cached in the ServerName object, and can be deleted by deleting sensitive data through the URL_API</p>

<dt>Freeing memory on exit
<dd><p>Memory is freed by the URL Manager shutdown.

<dt>Temp buffers
<dd><p>The module uses the memory Manager's shared temporary buffers for internal operations. As these functions are always called under controlled conditions there is no danger of collision.</p>
	
<dt>Memory tuning
<dd><p>At present there are no opportunities to tune memory use.</p>
<dt>Tests
<dd><p>Selftests, but they do not check memory usage.</p>

<dt>Coverage
<dd><p>Selftests, ordinary surfing, reading email.</p>

<dt>Design choices
<dd><p>Each specific method is implemented as a separate class</p>
	
<dt>Improvements
<dd><p>Currently there are no plans for improvement</p>

</dl>
