/* -*- Mode: c++; tab-width: 4; indent-tabs-mode: t; c-basic-offset: 4 -*- */

group "layout.shrink-to-fit";

/* Here are some tests for our shrink-to-fit support and especially its underlying
   min/max width propagation algorithm. Min/max width propagation is used for
   table-cells, table-captions, absolutely positioned boxes with auto width, floats with
   auto width, inline-blocks with auto width, BUTTONs with auto width, LEGENDs with auto
   width, replaced elements with ::before and/or ::after, internally in MARQUEEs, and
   maybe more.

   Brief definition from spec: http://www.w3.org/TR/CSS21/visudet.html#shrink-to-fit-float
   ...which refers to: http://www.w3.org/TR/CSS21/tables.html#auto-table-layout */

require init;

include "modules/doc/frm_doc.h";
include "modules/layout/box/box.h";
include "modules/layout/content/scrollable.h";
include "modules/logdoc/htm_elm.h";
include "modules/widgets/OpScrollbar.h";

language ecmascript;

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:hidden;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:hidden test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:hidden;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:hidden test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:hidden;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:hidden test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:-o-paged-x-controls; height:50px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:paged-x test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:-o-paged-x-controls; height:50px;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:paged-x test, min. width > available w")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:-o-paged-x-controls; height:200px;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:paged-x test, max. width > available w")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:-o-paged-y; height:50px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:paged-y test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:-o-paged-y; height:50px;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:paged-y test, min. width > available w")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left; overflow:-o-paged-y; height:200px;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic float overflow:paged-y test, max. width > available w")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:inline-block;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic inline-block test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:inline-block;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic inline-block test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:inline-block;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic inline-block test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table-cell;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table-cell test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table-cell;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table-cell test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table-cell;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table-cell test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table-caption;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table-caption test")
disabled;
// FIXME: this fails, but it seems intentional (compatible with IE7)
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table-caption;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table-caption test, min. width > available width")
disabled;
// FIXME: this fails, but it seems intentional (compatible with IE7)
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table-caption;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table-caption test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="display:table;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic table test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic abs-pos test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic abs-pos test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("basic abs-pos test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <button id="stf" style="margin:0; padding:0; border:none;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </button>
	//! </body></html>
}
test("basic BUTTON test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <button id="stf" style="margin:0; padding:0; border:none;">
	//!  <div style="width:2000px; height:100px;"></div>
	//! </button>
	//! </body></html>
}
test("basic BUTTON test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <button id="stf" style="margin:0; padding:0; border:none;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </button>
	//! </body></html>
}
test("basic BUTTON test, max. width > available width")
disabled; // This test fails because of the fix for bug CORE-2178
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <fieldset style="margin:0; padding:0; border:none;">
	//!  <legend id="stf" style="margin:0; padding:0; border:none;">
	//!   <div style="width:100px; height:100px;"></div>
	//!  </legend>
	//! </fieldset>
	//! </body></html>
}
test("basic LEGEND test")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <fieldset style="margin:0; padding:0; border:none;">
	//!  <legend id="stf" style="margin:0; padding:0; border:none;">
	//!   <div style="width:2000px; height:100px;"></div>
	//!  </legend>
	//! </fieldset>
	//! </body></html>
}
test("basic LEGEND test, min. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 2000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <fieldset style="margin:0; padding:0; border:none;">
	//!  <legend id="stf" style="margin:0; padding:0; border:none;">
	//!   <div style="display:inline-block; width:500px; height:100px;"></div>
	//!   <div style="display:inline-block; width:500px; height:100px;"></div>
	//!   <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  </legend>
	//! </fieldset>
	//! </body></html>
}
test("basic LEGEND test, max. width > available width")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//!  <marquee id="m1"><div id="d1"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee id="m2" style="width:500px;"><div id="d2"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee id="m3" style="float:left;"><div id="d3"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee id="m4"><div id="d4"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee id="m5" style="position:absolute; left:0; top:0; width:500px;"><div id="d5"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee id="m6" style="position:absolute; left:0; top:0;"><div id="d6"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee id="m7"><div id="d7"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee id="m8" style="width:500px;"><div id="d8"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee id="m9" style="float:left;"><div id="d9"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee id="m10" style="position:absolute; left:0; top:0; width:500px;"><div id="d10"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee id="m11" style="position:absolute; left:0; top:0;"><div id="d11"><div style="width:10000px; height:50px;"></div></div></marquee>
	//! </body></html>
}
test("basic MARQUEE test, horizontal")
{
	/* MARQUEEs are weird and unspecified. If any of these tests start failing,
	   it doesn't necessarily mean that a bug has been introduced. */

	verify(document.getElementById('m1').offsetWidth == 1000);
	verify(document.getElementById('d1').offsetWidth == 100);

	verify(document.getElementById('m2').offsetWidth == 500);
	verify(document.getElementById('d2').offsetWidth == 100);

	verify(document.getElementById('m3').offsetWidth == 100);
	verify(document.getElementById('d3').offsetWidth == 100);

	verify(document.getElementById('m4').offsetWidth == 900);
	verify(document.getElementById('d4').offsetWidth == 100);

	verify(document.getElementById('m5').offsetWidth == 500);
	verify(document.getElementById('d5').offsetWidth == 100);

	verify(document.getElementById('m6').offsetWidth == 100);
	verify(document.getElementById('d6').offsetWidth == 100);

	verify(document.getElementById('m7').offsetWidth == 1000);
	verify(document.getElementById('d7').offsetWidth == 10000);

	verify(document.getElementById('m8').offsetWidth == 500);
	verify(document.getElementById('d8').offsetWidth == 10000);

	verify(document.getElementById('m9').offsetWidth == 1000);
	verify(document.getElementById('d9').offsetWidth == 10000);

	verify(document.getElementById('m10').offsetWidth == 500);
	verify(document.getElementById('d10').offsetWidth == 10000);

	verify(document.getElementById('m11').offsetWidth == 1000);
	verify(document.getElementById('d11').offsetWidth == 10000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//!  <marquee direction="down" id="m1"><div id="d1"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m2" style="width:500px;"><div id="d2"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m3" style="float:left;"><div id="d3"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m4"><div id="d4"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m5" style="position:absolute; left:0; top:0; width:500px;"><div id="d5"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m6" style="position:absolute; left:0; top:0;"><div id="d6"><div style="width:100px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m7"><div id="d7"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m8" style="width:500px;"><div id="d8"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m9" style="float:left;"><div id="d9"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m10" style="position:absolute; left:0; top:0; width:500px;"><div id="d10"><div style="width:10000px; height:50px;"></div></div></marquee>
	//!  <marquee direction="down" id="m11" style="position:absolute; left:0; top:0;"><div id="d11"><div style="width:10000px; height:50px;"></div></div></marquee>
	//! </body></html>
}
test("basic MARQUEE test, vertical")
{
	/* MARQUEEs are weird and unspecified. If any of these tests start failing,
	   it doesn't necessarily mean that a bug has been introduced. */

	verify(document.getElementById('m1').offsetWidth == 1000);
	verify(document.getElementById('d1').offsetWidth == 1000);

	verify(document.getElementById('m2').offsetWidth == 500);
	verify(document.getElementById('d2').offsetWidth == 500);

	verify(document.getElementById('m3').offsetWidth == 100);
	verify(document.getElementById('d3').offsetWidth == 100);

	verify(document.getElementById('m4').offsetWidth == 900);
	verify(document.getElementById('d4').offsetWidth == 900);

	verify(document.getElementById('m5').offsetWidth == 500);
	verify(document.getElementById('d5').offsetWidth == 500);

	verify(document.getElementById('m6').offsetWidth == 100);
	verify(document.getElementById('d6').offsetWidth == 100);

	verify(document.getElementById('m7').offsetWidth == 1000);
	verify(document.getElementById('d7').offsetWidth == 1000);

	verify(document.getElementById('m8').offsetWidth == 500);
	verify(document.getElementById('d8').offsetWidth == 500);

	verify(document.getElementById('m9').offsetWidth == 10000);
	verify(document.getElementById('d9').offsetWidth == 10000);

	verify(document.getElementById('m10').offsetWidth == 500);
	verify(document.getElementById('d10').offsetWidth == 500);

	verify(document.getElementById('m11').offsetWidth == 10000);
	verify(document.getElementById('d11').offsetWidth == 10000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; min-width:500px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("min-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; max-width:50px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("max-width")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; min-width:500px; max-width:50px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("min-width and max-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; min-width:50%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("percentual min-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; max-width:5%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("percentual max-width")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; min-width:50%; max-width:5%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("percentual min-width and max-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; text-indent:50px;">
	//!  <div style="display:inline-block; width:50px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("text-indent")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:list-item; list-style-position:inside;">
	//!   <div style="display:inline-block; width:50px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("list-item-marker inside")
{
	verify(document.getElementById('stf').offsetWidth > 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; text-indent:50px;">
	//!  <div style="display:inline-block; width:50px; height:50px;"></div>
	//!  <div style="display:inline-block; width:50px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("whitespace between words")
{
	verify(document.getElementById('stf').offsetWidth > 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//!  <br>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("br")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 60);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="overflow:hidden; width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("BFC-block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 60);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:10px; height:10px;"></div>
	//!  <div style="width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("float and block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 60);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:10px; height:10px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("float and BFC-block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:10px; height:10px;"></div>
	//!  <div style="float:right; width:10px; height:10px;"></div>
	//!  <div style="width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("floats and block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 60);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:10px; height:10px;"></div>
	//!  <div style="float:right; width:10px; height:10px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("floats and BFC-block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 120);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:35px; height:10px;"></div>
	//!  <div style="float:right; width:35px; height:10px;"></div>
	//!  <div style="width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("wide floats and block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 70);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:35px; height:10px;"></div>
	//!  <div style="float:right; width:35px; height:10px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:50px; margin:0 -20px;"></div>
	//! </div>
	//! </body></html>
}
test("wide floats and BFC-block with negative margins")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//!  <div></div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("paragraph interrupted by block")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:50px; height:75px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:50px;"></div>
	//!   <div></div>
	//!   <div style="display:inline-block; width:100px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("float beside taller paragraph interrupted by block")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:50px; height:150px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:50px;"></div>
	//!   <div></div>
	//!   <div style="display:inline-block; width:100px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("float beside shorter paragraph interrupted by block")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="display:inline-table;">
	//!   <tr><td><div style="width:400px; height:10px;"></td></tr>
	//!  </table>&#x200b;<div style="display:inline-block; width:400px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("inline-table + inline-block")
{
	verify(document.getElementById('stf').offsetWidth == 800);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="display:inline-table;">
	//!   <tr><td><div style="width:800px; height:10px;"></td></tr>
	//!  </table>
	//!  <div style="display:inline-block; width:800px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("wide inline-table + inline-block")
{
	verify(document.getElementById('stf').offsetWidth == 1000);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 548);
	verify(document.getElementById('stf2').offsetWidth == 2048);
	verify(document.getElementById('stf3').offsetWidth == 926);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos % padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 594);
	verify(document.getElementById('stf2').offsetWidth == 2094);
	verify(document.getElementById('stf3').offsetWidth == 780);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; padding:7px; border:17px solid white; margin:37px; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; padding:7px; border:17px solid white; margin:37px; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; padding:7px; border:17px solid white; margin:37px; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 548);
	verify(document.getElementById('stf2').offsetWidth == 2048);
	verify(document.getElementById('stf3').offsetWidth == 926);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; padding:3%; border:17px solid white; margin:11%; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; padding:3%; border:17px solid white; margin:11%; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; padding:3%; border:17px solid white; margin:11%; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos % padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 594);
	verify(document.getElementById('stf2').offsetWidth == 2094);
	verify(document.getElementById('stf3').offsetWidth == 780);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos min-width with padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 548);
	verify(document.getElementById('stf2').offsetWidth == 548);
	verify(document.getElementById('stf3').offsetWidth == 549);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos min-width with % padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 594);
	verify(document.getElementById('stf2').offsetWidth == 594);
	verify(document.getElementById('stf3').offsetWidth == 595);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; box-sizing:border-box; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; box-sizing:border-box; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:451px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; box-sizing:border-box; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:453px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos min-width with padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 500);
	verify(document.getElementById('stf2').offsetWidth == 500);
	verify(document.getElementById('stf3').offsetWidth == 501);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; box-sizing:border-box; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; box-sizing:border-box; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:405px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; box-sizing:border-box; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:407px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos min-width with % padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 500);
	verify(document.getElementById('stf2').offsetWidth == 500);
	verify(document.getElementById('stf3').offsetWidth == 501);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos max-width with padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 148);
	verify(document.getElementById('stf2').offsetWidth == 547);
	verify(document.getElementById('stf3').offsetWidth == 548);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos max-width with % padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 194);
	verify(document.getElementById('stf2').offsetWidth == 593);
	verify(document.getElementById('stf3').offsetWidth == 594);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; box-sizing:border-box; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; box-sizing:border-box; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:451px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; box-sizing:border-box; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:453px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos max-width with padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 148);
	verify(document.getElementById('stf2').offsetWidth == 499);
	verify(document.getElementById('stf3').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="position:absolute; box-sizing:border-box; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="position:absolute; box-sizing:border-box; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:405px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="position:absolute; box-sizing:border-box; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:407px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos max-width with % padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 194);
	verify(document.getElementById('stf2').offsetWidth == 499);
	verify(document.getElementById('stf3').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 548);
	verify(document.getElementById('stf2').offsetWidth == 2048);
	verify(document.getElementById('stf3').offsetWidth == 926);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float % padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 594);
	verify(document.getElementById('stf2').offsetWidth == 2094);
	verify(document.getElementById('stf3').offsetWidth == 780);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; padding:7px; border:17px solid white; margin:37px; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; padding:7px; border:17px solid white; margin:37px; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; padding:7px; border:17px solid white; margin:37px; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 548);
	verify(document.getElementById('stf2').offsetWidth == 2048);
	verify(document.getElementById('stf3').offsetWidth == 926);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; padding:3%; border:17px solid white; margin:11%; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; padding:3%; border:17px solid white; margin:11%; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:2000px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; padding:3%; border:17px solid white; margin:11%; box-sizing:border-box;">
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//!  <div style="display:inline-block; width:500px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float % padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 594);
	verify(document.getElementById('stf2').offsetWidth == 2094);
	verify(document.getElementById('stf3').offsetWidth == 780);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float min-width with padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 548);
	verify(document.getElementById('stf2').offsetWidth == 548);
	verify(document.getElementById('stf3').offsetWidth == 549);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float min-width with % padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 594);
	verify(document.getElementById('stf2').offsetWidth == 594);
	verify(document.getElementById('stf3').offsetWidth == 595);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; box-sizing:border-box; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; box-sizing:border-box; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:451px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; box-sizing:border-box; min-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:453px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float min-width with padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 500);
	verify(document.getElementById('stf2').offsetWidth == 500);
	verify(document.getElementById('stf3').offsetWidth == 501);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; box-sizing:border-box; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; box-sizing:border-box; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:405px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; box-sizing:border-box; min-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:407px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float min-width with % padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 500);
	verify(document.getElementById('stf2').offsetWidth == 500);
	verify(document.getElementById('stf3').offsetWidth == 501);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float max-width with padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 148);
	verify(document.getElementById('stf2').offsetWidth == 547);
	verify(document.getElementById('stf3').offsetWidth == 548);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:499px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:501px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float max-width with % padding/border/margin")
{
	verify(document.getElementById('stf1').offsetWidth == 194);
	verify(document.getElementById('stf2').offsetWidth == 593);
	verify(document.getElementById('stf3').offsetWidth == 594);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; box-sizing:border-box; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; box-sizing:border-box; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:451px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; box-sizing:border-box; max-width:500px; padding:7px; border:17px solid white; margin:37px;">
	//!  <div style="width:453px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float max-width with padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 148);
	verify(document.getElementById('stf2').offsetWidth == 499);
	verify(document.getElementById('stf3').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf1" style="float:left; box-sizing:border-box; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:100px; height:100px;"></div>
	//! </div>
	//! <div id="stf2" style="float:left; box-sizing:border-box; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:405px; height:100px;"></div>
	//! </div>
	//! <div id="stf3" style="float:left; box-sizing:border-box; max-width:500px; padding:3%; border:17px solid white; margin:11%;">
	//!  <div style="width:407px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("float max-width with % padding/border/margin box-sizing")
{
	verify(document.getElementById('stf1').offsetWidth == 194);
	verify(document.getElementById('stf2').offsetWidth == 499);
	verify(document.getElementById('stf3').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; min-width:100px; height:100px; margin:1px; border:2px solid transparent; padding:3px;"></div>
	//! </div>
	//! </body></html>
}
test("Nested STF with min-width and m/b/p")
{
	verify(document.getElementById('stf').offsetWidth == 112);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; box-sizing:border-box; min-width:100px; height:100px; margin:1px; border:2px solid transparent; padding:3px;"></div>
	//! </div>
	//! </body></html>
}
test("Nested STF with min-width and m/b/p box-sizing")
{
	verify(document.getElementById('stf').offsetWidth == 102);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="10" cellpadding="10" style="table-layout:auto; width:1px; margin:10px; border:10px solid white; padding:10px;">
	//!   <tr>
	//!    <td style="width:200px;"><div style="width:100px; height:30px;"></td>
	//!    <td style="width:200px;"><div style="width:100px; height:30px;"></td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:auto")
{
	verify(document.getElementById('stf').offsetWidth == 330);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:auto; min-width:500px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:auto min-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:auto; min-width:500px;">
	//!   <tr>
	//!    <td style="width:400px;">
	//!     <div style="display:inline-block; width:150px; height:30px;"></div>
	//!     <div style="display:inline-block; width:150px; height:30px;"></div>
	//!    </td>
	//!    <td style="width:400px;">
	//!     <div style="display:inline-block; width:150px; height:30px;"></div>
	//!     <div style="display:inline-block; width:150px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:auto min-width, wider")
{
	verify(document.getElementById('stf').offsetWidth == 800);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:auto; max-width:300px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:auto max-width")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:auto; max-width:300px;">
	//!   <tr>
	//!    <td style="width:100px;">
	//!     <div style="display:inline-block; width:50px; height:30px;"></div>
	//!     <div style="display:inline-block; width:50px; height:30px;"></div>
	//!    </td>
	//!    <td style="width:100px;">
	//!     <div style="display:inline-block; width:50px; height:30px;"></div>
	//!     <div style="display:inline-block; width:50px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:auto max-width, narrower")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:auto; max-width:10px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:auto very low max-width")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:auto; width:400px; min-width:500px; max-width:300px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:auto min-width max-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="10" cellpadding="10" style="table-layout:fixed; width:1px; margin:10px; border:10px solid white; padding:10px;">
	//!   <tr>
	//!    <td style="width:200px;"><div style="width:100px; height:30px;"></td>
	//!    <td style="width:200px;"><div style="width:100px; height:30px;"></td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed")
{
	verify(document.getElementById('stf').offsetWidth == 530);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:400px; min-width:500px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed min-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:400px; max-width:300px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed max-width")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:400px; max-width:10px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed very low max-width")
{
	verify(document.getElementById('stf').offsetWidth == 10);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:400px; min-width:500px; max-width:300px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed min-width max-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100%;">
	//!   <tr>
	//!    <td style="width:50%;">
	//!     <div style="display:inline-block; width:20px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:20px; height:10px;"></div>
	//!    </td>
	//!    <td style="width:5px;">
	//!     <div style="display:inline-block; width:20px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:20px; height:10px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:1px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:1px; height:10px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed, % width column is widest")
{
	verify(document.getElementById('stf').offsetWidth == 80);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100%;">
	//!   <tr>
	//!    <td style="width:50%;">
	//!     <div style="display:inline-block; width:20px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:20px; height:10px;"></div>
	//!    </td>
	//!    <td style="width:50px;">
	//!     <div style="display:inline-block; width:20px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:20px; height:10px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:1px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:1px; height:10px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed, fixed width column is widest")
{
	verify(document.getElementById('stf').offsetWidth == 104);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100%;">
	//!   <tr>
	//!    <td style="width:50%;">
	//!     <div style="display:inline-block; width:20px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:20px; height:10px;"></div>
	//!    </td>
	//!    <td style="width:5px;">
	//!     <div style="display:inline-block; width:20px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:20px; height:10px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:50px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:50px; height:10px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed, auto width column is widest")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100%;">
	//!   <tr>
	//!    <td style="width:4%;">
	//!     <div style="display:inline-block; width:30px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:30px; height:10px;"></div>
	//!    </td>
	//!    <td style="width:7%;">
	//!     <div style="display:inline-block; width:30px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:30px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:30px; height:10px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed, two % width columns")
{
	verify(document.getElementById('stf').offsetWidth == 165);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100%;">
	//!   <tr>
	//!    <td style="width:100%;">
	//!     <div style="display:inline-block; width:30px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:30px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:30px; height:10px;"></div>
	//!    </td>
	//!    <td style="width:50%;">
	//!     <div style="display:inline-block; width:30px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:30px; height:10px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed, two % width columns > 100%")
{
	verify(document.getElementById('stf').offsetWidth == 180);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:1px; height:1px;">
	//!   <col style="width:200px;"></col>
	//!   <tr>
	//!    <td style="padding:0 50px;"></td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with table-layout:fixed, COL + TD with padding")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100px;">
	//!   <tr>
	//!    <td style="width:1px;">&nbsp;</td>
	//!    <td style="width:0;">&nbsp;</td>
	//!    <td style="width:50px;">&nbsp;</td>
	//!   </tr>
	//!   <tr>
	//!    <td id="elm" colspan="2"><div style="width:50px; height:10px;"></div></td>
	//!    <td>&nbsp;</td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table-layout:fixed, fixed width and colums, colspan in 2nd row")
{
	verify(document.getElementById('elm').offsetWidth == 1);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100%;">
	//!   <tr>
	//!    <td>&nbsp;</td>
	//!    <td>&nbsp;</td>
	//!    <td style="width:50px;">&nbsp;</td>
	//!   </tr>
	//!   <tr>
	//!    <td colspan="2"><div style="display:inline-block; width:100px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:10px;"></div></td>
	//!    <td>&nbsp;</td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table-layout:fixed, %width and auto column, colspan in 2nd row")
{
	verify(document.getElementById('stf').offsetWidth == 250);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="table-layout:fixed; width:100px;">
	//!   <col style="width:110px;">
	//!   <tr>
	//!    <td style="width:120px;"></td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table-layout:fixed, fixed-width column, fixed-width cell")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="box-sizing:content-box; width:400px; margin:10px; border:10px solid white; padding:10px;">
	//!   <tr>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!     <div style="display:inline-block; width:100px; height:30px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("table with m/b/p, fixed width and box-sizing:content-box")
{
	verify(document.getElementById('stf').offsetWidth == 460);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:flex;">hest hest</div>
	//! </div>
	//! <div id="ref" style="float:left;">hest hest</div>
	//! </body></html>
}
test("flexbox (row)")
{
	verify(stf.offsetWidth == ref.offsetWidth);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:flex; flex-flow:column;">hest hest</div>
	//! </div>
	//! <div id="ref" style="float:left;">hest hest</div>
	//! </body></html>
}
test("flexbox (column)")
{
	verify(stf.offsetWidth == ref.offsetWidth);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div style="width:0;">
	//!  <div id="stf" style="float:left;">
	//!   <div style="display:flex;">hest hest</div>
	//!  </div>
	//!  <div id="ref" style="float:left;">hest hest</div>
	//! </div>
	//! </body></html>
}
test("flexbox (row), no available width")
{
	verify(stf.offsetWidth == ref.offsetWidth);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div style="width:0;">
	//!  <div id="stf" style="float:left;">
	//!   <div style="display:flex; flex-flow:column;">hest hest</div>
	//!  </div>
	//!  <div id="ref" style="float:left;">hest hest</div>
	//! </div>
	//! </body></html>
}
test("flexbox (column), no available width")
{
	verify(stf.offsetWidth == ref.offsetWidth);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div style="width:0;">
	//!  <div id="stf" style="float:left;">
	//!   <div style="display:flex;"><div style="flex:none;">hest hest</div></div>
	//!  </div>
	//! </div>
	//! <div id="ref" style="float:left;">hest hest</div>
	//! </body></html>
}
test("flexbox (row), no available width, inflexible")
{
	verify(stf.offsetWidth == ref.offsetWidth);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div style="width:0;">
	//!  <div id="stf" style="float:left;">
	//!   <div style="display:flex; flex-flow:column;"><div style="flex:none;">hest hest</div></div>
	//!  </div>
	//!  <div id="ref" style="float:left;">hest hest</div>
	//! </div>
	//! </body></html>
}
test("flexbox (column), no available width, inflexible")
{
	verify(stf.offsetWidth == ref.offsetWidth);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div style="width:0;">
	//!  <div id="stf" style="float:left;">
	//!   <div style="display:flex;"><div style="max-width:10px;">hest hest</div></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("flexbox (row), no available width, max-width")
{
	verify(stf.offsetWidth == 10);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div style="width:0;">
	//!  <div id="stf" style="float:left;">
	//!   <div style="display:flex; flex-flow:column;"><div style="max-width:10px;">hest hest</div></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("flexbox (column), no available width, max-width")
{
	verify(stf.offsetWidth == 10);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left;">
	//!  <div style="float:left; min-width:500px;">
	//!   <div style="width:100px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Nested STF where inner has min-width")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="float:left;">
	//!  <div style="float:left; max-width:50px;">
	//!   <div style="width:100px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Nested STF where inner has max-width")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("one float")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("container with fixed width/height beside float")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:hidden container with fixed width/height beside float")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("quirk: container with fixed width/height beside float")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:100px; height:100px;">
	//!   <div style="float:left; width:40px; height:50px;"></div>
	//!   <div style="float:left; width:40px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("quirk: container with fixed width and 2 floats inside")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("container with fixed size beside float with same height")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("BFC-container with fixed size beside float with same height")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table; width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("table with fixed size beside float with same height")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <img style="display:block; width:100px; height:50px;" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////ywAAAAAAQABAAACAkQBADs=">
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("image block with fixed size beside float of same height")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Content with fixed size beside floated table with same height")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; width:50px; height:49px;">
	//!   <div style="height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-size overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; width:50px; height:50px;">
	//!   <div style="height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-size overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto;">
	//!   <div style="width:50px; height:49px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto;">
	//!   <div style="width:50px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; max-height:49px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size max-h overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; max-height:50px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size max-h overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; min-height:49px;">
	//!   <div style="width:50px; height:10px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size min-h overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; min-height:50px;">
	//!   <div style="width:50px; height:10px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size min-h overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; max-height:10px; min-height:49px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size min-h+max-h overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; max-height:10px; min-height:50px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside auto-size min-h+max-h overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:49px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:50px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:100px; max-height:49px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h max-h overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:100px; max-height:50px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h max-h overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:10px; min-height:49px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h min-h overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:10px; min-height:50px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h min-h overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:100px; max-height:10px; min-height:49px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h min-h+max-h overf:auto, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:50px;"></div>
	//!  <div style="overflow:auto; height:100px; max-height:10px; min-height:50px;">
	//!   <div style="width:50px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside fixed-h min-h+max-h overf:auto, content below")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:50px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:auto with overflowing content")
language c++;
{
	FramesDocument* doc = state.doc;
	verify(OpStatus::IsSuccess(doc->Reflow(FALSE)));
	HTML_Element* stf = doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(sc->HasVerticalScrollbar());
	verify(box->GetWidth() == 50 + sc->GetVerticalScrollbarWidth());
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:50px; min-height:99px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:auto with overflowing content and min-height")
language c++;
{
	FramesDocument* doc = state.doc;
	verify(OpStatus::IsSuccess(doc->Reflow(FALSE)));
	HTML_Element* stf = doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(sc->HasVerticalScrollbar());
	verify(box->GetWidth() == 50 + sc->GetVerticalScrollbarWidth());
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:50px; min-height:100px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:auto with non-overflowing content and min-height")
language c++;
{
	HTML_Element* stf = state.doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(box->GetWidth() == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:200px; max-height:99px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:auto with overflowing content and max-height")
language c++;
{
	FramesDocument* doc = state.doc;
	verify(OpStatus::IsSuccess(doc->Reflow(FALSE)));
	HTML_Element* stf = doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(sc->HasVerticalScrollbar());
	verify(box->GetWidth() == 50 + sc->GetVerticalScrollbarWidth());
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:200px; max-height:100px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:auto with non-overflowing content and max-height")
language c++;
{
	HTML_Element* stf = state.doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(box->GetWidth() == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:200px; max-height:90px; min-height:99px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:auto with overflowing content and min-h/max-h")
language c++;
{
	FramesDocument* doc = state.doc;
	verify(OpStatus::IsSuccess(doc->Reflow(FALSE)));
	HTML_Element* stf = doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(sc->HasVerticalScrollbar());
	verify(box->GetWidth() == 50 + sc->GetVerticalScrollbarWidth());
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:200px; max-height:90px; min-height:100px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:auto with non-overflowing content and min-h/max-h")
language c++;
{
	HTML_Element* stf = state.doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(box->GetWidth() == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; overflow:scroll; height:50px;">
	//!  <div style="width:50px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("overflow:scroll with overflowing content")
language c++;
{
	HTML_Element* stf = state.doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(sc->HasVerticalScrollbar());
	verify(box->GetWidth() == 50 + sc->GetVerticalScrollbarWidth());
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="height:50px;">
	//!   <div style="width:170px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed height beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="height:49px;">
	//!   <div style="width:170px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed height beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="height:100%;">
	//!   <div style="width:170px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Percentual height beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="height:100%;">
	//!   <div style="width:170px; height:49px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Percentual height beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="height:20px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed height and m/b/p beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="height:19px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed height and m/b/p beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="box-sizing:border-box; height:42px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed bb-height and m/b/p beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="box-sizing:border-box; height:41px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed bb-height and m/b/p beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100px; height:50px;">
	//!   <div style="width:170px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed width/height beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100px; height:49px;">
	//!   <div style="width:170px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed width/height beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100%; height:100%;">
	//!   <div style="width:170px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Percentual width/height beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100%; height:100%;">
	//!   <div style="width:170px; height:49px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Percentual width/height beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:70px; height:20px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed width/height and m/b/p beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:70px; height:19px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed width/height and m/b/p beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="box-sizing:border-box; width:100px; height:42px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed bb-width/height and m/b/p beside float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="box-sizing:border-box; width:100px; height:41px; margin:4px; border:5px solid white; padding:6px;">
	//!   <div style="width:140px; height:1px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:150px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed bb-width/height and m/b/p beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:5em;"></div>
	//!  <div style="box-sizing:border-box; padding:0 20%; width:200px;">
	//!   <div style="display:inline-block; width:40px; height:0.5em;"></div>
	//!   <div style="display:inline-block; width:40px; height:0.5em;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:60px; height:0.5em;"></div>&#x200b;<div style="display:inline-block; width:60px; height:0.5em;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed bb-width and % padding beside float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 220);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; height:200px;">
	//!  <div style="height:50%;">
	//!   <div style="float:left; width:100px; height:50%;"></div>
	//!   <div style="height:49px;"></div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("% height in % height in fixed height, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; height:200px;">
	//!  <div style="height:50%;">
	//!   <div style="float:left; width:100px; height:50%;"></div>
	//!   <div style="height:50px;"></div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("% height in % height in fixed height, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; height:200px;">
	//!  <div>
	//!   <div style="float:left; width:100px; height:50%;"></div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("% height in auto height in fixed height")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="height:200px; box-sizing:border-box; padding:20% 0;">
	//!   <div style="float:left; width:100px; height:50%;">
	//!    <div style="height:10px;"></div>
	//!   </div>
	//!   <div style="height:9px;"></div>
	//!   <div style="display:inline-block; width:100px; height:20px;"></div>
    //!  </div>
	//! </div>
	//! </body></html>
}
test("% bb-height with % padding, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="height:200px; box-sizing:border-box; padding:20% 0;">
	//!   <div style="float:left; width:100px; height:50%;">
	//!    <div style="height:10px;"></div>
	//!   </div>
	//!   <div style="height:10px;"></div>
	//!   <div style="display:inline-block; width:100px; height:20px;"></div>
    //!  </div>
	//! </div>
	//! </body></html>
}
test("% bb-height with % padding, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:51px;"></div>
	//!  <div style="width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("container with fixed size beside taller float")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:51px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("BFC-container with fixed size beside taller float")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:51px;"></div>
	//!  <div style="display:table; width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("table with fixed size beside taller float")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:51px;"></div>
	//!  <img style="display:block; width:100px; height:50px;" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////ywAAAAAAQABAAACAkQBADs=">
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("image block with fixed size beside taller float")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; display:table; width:50px; height:51px;"></div>
	//!  <div style="overflow:hidden; width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:140px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Content with fixed size beside taller floated table")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:150px;">
	//!   <div style="display:inline-block; width:50px; height:30px;"></div>
	//!   <div style="display:inline-block; width:50px; height:30px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:120px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width container with wrapping content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="width:100px;">
	//!   <div style="display:inline-block; width:1px; height:30px;"></div>
	//!   <div style="display:inline-block; width:1px; height:30px;"></div>
	//!   <div style="display:inline-block; width:1px; height:30px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:70px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width container with non-wrapping content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 120);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption;"></div>
	//!   <div style="display:table-caption; margin-top:49px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Second top table-caption with top margin, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption;"></div>
	//!   <div style="display:table-caption; margin-top:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Second top table-caption with top margin, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption; caption-side:bottom;"></div>
	//!   <div style="display:table-caption; caption-side:bottom; margin-top:49px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Second bottom table-caption with top margin, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption; caption-side:bottom;"></div>
	//!   <div style="display:table-caption; caption-side:bottom; margin-top:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Second bottom table-caption with top margin, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption; caption-side:bottom; margin-bottom:48px;"></div>
	//!   <div style="display:table-row-group;"><div style="height:1px;"></div></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Bottom table-caption with bottom margin, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption; caption-side:bottom; margin-bottom:49px;"></div>
	//!   <div style="display:table-row-group;"><div style="height:1px;"></div></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Bottom table-caption with bottom margin, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption; margin-bottom:48px;"></div>
	//!   <div style="display:table-caption;"></div>
	//!   <div style="display:table-row-group;"><div style="height:1px;"></div></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Bottom margin between top table-captions, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px;"></div>
	//!  <div style="display:table;">
	//!   <div style="display:table-caption; margin-bottom:49px;"></div>
	//!   <div style="display:table-caption;"></div>
	//!   <div style="display:table-row-group;"><div style="height:1px;"></div></div>
	//!  </div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Bottom margin between top table-captions, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

/* Note that how table caption min/max widths are handled varies quite a lot
   between browsers. Changing Opera's behavior some time in the future might be
   a good idea, but then the following tests must be revised. */

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0">
	//!   <caption>
	//!    <div style="display:inline-block; width:100px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:10px;"></div>
	//!   </caption>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("Table with caption but no cells")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table style="float:left;" cellspacing="0" cellpadding="0">
	//!   <caption>
	//!    <div style="display:inline-block; width:100px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:10px;"></div>
	//!   </caption>
	//!  </table>
	//!  <div style="display:inline-block; width:90px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Floated table with caption but no cells, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 290);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0">
	//!   <caption>
	//!    <div style="display:inline-block; width:100px; height:10px;"></div>
	//!    <div style="display:inline-block; width:100px; height:10px;"></div>
	//!   </caption>
	//!   <tr>
	//!    <td>
	//!     <div style="width:50px; height:10px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//! </div>
	//! </body></html>
}
test("Table with wide caption")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table style="float:left;" cellspacing="0" cellpadding="0">
	//!   <caption>
	//!    <div style="display:inline-block; width:100px; height:10px;"></div>
	//!    <div style="display:inline-block; width:100px; height:10px;"></div>
	//!   </caption>
	//!   <tr>
	//!    <td>
	//!     <div style="width:50px; height:10px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//!  <div style="display:inline-block; width:90px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Floated table with wide caption, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 140);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:50px;">
	//!   <div style="float:left; width:100px; height:100px;"></div>
	//!   <div style="float:left; width:100px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("two floats in width-constrained container")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:50px;">
	//!   <div style="float:left; width:100px; height:100px;"></div>
	//!   <div style="float:left; width:100px; height:100px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:10px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("two floats in width-constrained container, inline content")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div id="elm" style="width:150px; overflow:hidden;">
	//!   <div style="float:right; width:100px; height:50px;"></div>
	//!   <div style="float:right; width:100px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:400px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("BFC block with wrapping floats beside float")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div style="overflow:hidden; border:10px solid white; padding:10px;">
	//!   <div style="float:left; width:100px; height:59px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:400px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("BFC block with b/p and float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div style="overflow:hidden; border:10px solid white; padding:10px;">
	//!   <div style="float:left; width:100px; height:60px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:400px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("BFC block with b/p and float, content below")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div style="overflow:hidden; margin:10px; border:10px solid white; padding:10px;">
	//!   <div style="float:left; width:100px; height:60px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("BFC block with m/b/p and float")
{
	verify(document.getElementById('stf').offsetWidth == 250);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:5px;"></div>
	//!  <span></span>
	//!  <div style="margin-top:5px; height:4px;"></div>
	//!  <div style="display:inline-block; width:110px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("line with no content, followed by content that fits beside")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:5px;"></div>
	//!  <span></span>
	//!  <div style="margin-top:5px; height:5px;"></div>
	//!  <div style="display:inline-block; width:110px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("line with no content, followed by content that fits below")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:5px;"></div>
	//!  <span style="padding:10%;"></span>
	//!  <div style="margin-top:5px; height:4px;"></div>
	//!  <div style="display:inline-block; width:110px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("line with only percentual padding, followed by content beside")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:5px;"></div>
	//!  <span style="padding:10%;"></span>
	//!  <div style="margin-top:5px; height:5px;"></div>
	//!  <div style="display:inline-block; width:110px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("line with only percentual padding, followed by content below")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <span style="display:inline-block; width:100px; height:9px;"></span>
	//!  <br>
	//!  <div style="display:inline-block; width:110px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("quirk: short line, followed by content that fits beside")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <span style="display:inline-block; width:100px; height:10px;"></span>
	//!  <br>
	//!  <div style="display:inline-block; width:110px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("quirk: short line, followed by content that fits below")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div style="display:inline-block; width:300px;">
	//!   <div style="height:90px;"></div>
	//!  </div>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("auto-height inline-block followed by content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div style="display:inline-block; width:300px;">
	//!   <div style="height:100px;"></div>
	//!  </div>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("auto-height inline-block followed by content below float")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div style="display:inline-table; width:300px;">
	//!   <div style="height:90px;"></div>
	//!  </div>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("auto-height inline-table followed by content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div style="display:inline-table; width:300px;">
	//!   <div style="height:100px;"></div>
	//!  </div>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("auto-height inline-table followed by content below float")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="float:left; width:100px;">
	//!   <tr>
	//!    <td>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//!  <div style="height:119px;"></div>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("fixed-width floated table, content beside")
disabled; // Not supported properly, and this is not a regression
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="float:left; width:100px;">
	//!   <tr>
	//!    <td>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!    </td>
	//!    <td>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!     <div style="float:left; width:40px; height:40px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//!  <div style="height:120px;"></div>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("fixed-width floated table, content below")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:100px;">
	//!   <table cellspacing="0" cellpadding="0" style="float:left;">
	//!    <tr>
	//!     <td>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!     </td>
	//!     <td>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!     </td>
	//!    </tr>
	//!   </table>
	//!  </div>
	//!  <div style="height:119px;"></div>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("fixed-width container with floated table, content beside")
disabled; // Not supported properly, and this is not a regression
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:100px;">
	//!   <table cellspacing="0" cellpadding="0" style="float:left;">
	//!    <tr>
	//!     <td>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!     </td>
	//!     <td>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!      <div style="float:left; width:40px; height:40px;"></div>
	//!     </td>
	//!    </tr>
	//!   </table>
	//!  </div>
	//!  <div style="height:120px;"></div>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("fixed-width container with floated table, content below")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:200px;"></div>
	//!  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("auto-height image followed by content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:50px;"></div>
	//!  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("auto-height image followed by content below float")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:1.5em;"></div>
	//!  <input style="width:20px; height:1em; margin:0; padding:0; border:none;">
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("text input followed by content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:1em;"></div>
	//!  <input style="width:20px; height:1em; margin:0; padding:0; border:none;">
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("text input followed by content below float")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:1.5em;"></div>
	//!  <textarea style="width:20px; height:1em; margin:0; padding:0; border:none;"></textarea>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("textarea followed by content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:1em;"></div>
	//!  <textarea style="width:20px; height:1em; margin:0; padding:0; border:none;"></textarea>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("textarea followed by content below float")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:1.5em;"></div>
	//!  <input type="radio" style="width:20px; height:1em; margin:0; padding:0; border:none;">
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("radio button followed by content beside float")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:1em;"></div>
	//!  <input type="radio" style="width:20px; height:1em; margin:0; padding:0; border:none;">
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("radio button followed by content below float")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <select style="font:16px ahem; box-sizing:border-box; max-width:160px; margin:0;"><option>XXXXXXXXXX</select>
	//! </div>
	//! </body></html>
}
test("auto-width select")
{
	verify(document.getElementById('stf').offsetWidth == 160);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//!  <div style="float:left; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("float on line")
{
	// There are some trailing whitespace issues here, and I'm not touching that right now, so let's just verify that it becomes at least 200px wide.

	verify(document.getElementById('stf').offsetWidth >= 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:150px;">
	//!   <div style="display:inline-block; width:100px; height:50px;"></div>
	//!   <div style="float:left; width:100px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("float below line in width-constrained container")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:50px;">
	//!   <div style="float:left;">
	//!    <div style="display:inline-block; width:100px; height:50px;"></div>
	//!    <div style="display:inline-block; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="display:inline-block; width:10px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Nested STF in width-constrained container, inline content")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:50px;">
	//!   <div style="float:left;">
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="height:100px;"></div>
	//!  <div style="display:inline-block; width:10px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Nested STF in width-constrained + content of same height")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:50px;">
	//!   <div style="float:left;">
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="height:99px;"></div>
	//!  <div style="display:inline-block; width:10px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Nested STF in width-constrained + shorter content")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="border:1px solid transparent; padding-left:20px; padding-right:8px;">
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("One float in container with border/padding")
{
	verify(document.getElementById('stf').offsetWidth == 130);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="border:1px solid transparent; padding-left:20px; padding-right:8px;">
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Two floats in container with border/padding")
{
	verify(document.getElementById('stf').offsetWidth == 230);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="border:1px solid transparent; padding-left:20px; padding-right:8px;">
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Three floats in container with border/padding")
{
	verify(document.getElementById('stf').offsetWidth == 330);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="border:1px solid transparent; padding-left:20px; padding-right:8px;">
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Four floats in container with border/padding")
{
	verify(document.getElementById('stf').offsetWidth == 430);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="border:1px solid transparent; padding-left:20px; padding-right:8px;">
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Five floats in container with border/padding")
{
	verify(document.getElementById('stf').offsetWidth == 530);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:299px;">
	//!   <div style="float:right; width:100px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:200px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width container with right-float, content below")
disabled; // It would require substantial work to make this test pass, and it's probably not important enough.
{
	verify(document.getElementById('stf').offsetWidth == 299);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; direction:rtl;">
	//!  <div style="width:299px;">
	//!   <div style="float:left; width:100px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:200px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width container with left-float, content below, RTL")
disabled; // It would require substantial work to make this test pass, and it's probably not important enough.
{
	verify(document.getElementById('stf').offsetWidth == 299);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:300px;">
	//!   <div style="float:right; width:100px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:200px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width container with right-float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; direction:rtl;">
	//!  <div style="width:300px;">
	//!   <div style="float:left; width:100px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:200px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width container with left-float, content beside, RTL")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left;">
	//!   <div style="width:100px; height:0;">
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="height:99px;"></div>
	//!  <div style="display:inline-block; width:300px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float with fixed-size w/ wrapping floats, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left;">
	//!   <div style="width:100px; height:0;">
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="height:60px;"></div>
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="height:109px;"></div>
	//!  <div style="display:inline-block; width:300px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float with fixed-size w/ float + block + float, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left;">
	//!   <div style="width:100px; height:0;">
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="height:60px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="height:99px;"></div>
	//!  <div style="display:inline-block; width:300px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float with fixed-size w/ float + float + block, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left;">
	//!   <div style="width:100px; height:0;">
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="float:left; width:100px; height:50px;"></div>
	//!    <div style="height:60px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="height:100px;"></div>
	//!  <div style="display:inline-block; width:300px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float with fixed-size w/ float + block, content below")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; font-size:16px;">
	//!  <div style="float:left; width:100px; height:30px;"></div>
	//!  <div style="width:200px;">
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Line in width-constrained container (fits beside float)")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:500px; height:100px;"></div>
	//!  <div style="width:400px;">&nbsp;</div>
	//!  <div>
	//!   <div style="display:inline-block; width:400px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Line in width-constrained container (doesn't fit beside float)")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:500px; height:100px;"></div>
	//!  <div style="width:400px;">
	//!   <div style="overflow:hidden; width:100px; height:10px;"></div>
	//!  </div>
	//!  <div>
	//!   <div style="display:inline-block; width:400px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Non-visible overflow block in width-constrained container")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:500px; height:100px;"></div>
	//!  <div style="width:400px;">
	//!   <div style="float:left; width:100px; height:100px;"></div>
	//!  </div>
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("Float + float in width-constrained container + float")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:500px; height:100px;"></div>
	//!  <div style="width:400px;">
	//!   <div style="float:left; width:100px; height:10px;"></div>
	//!  </div>
	//!  <div>
	//!   <div style="display:inline-block; width:400px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Float in width-constrained container")
{
	verify(document.getElementById('stf').offsetWidth == 900);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:500px; height:100px;"></div>
	//!  <div style="padding-top:1px; width:400px;">
	//!   <div style="margin-bottom:100px;"></div>
	//!   <div style="display:inline-block; width:10px; height:10px;"></div>
	//!  </div>
	//!  <div>
	//!   <div style="display:inline-block; width:400px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Width-constrained container with vertical margin")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:50px;"></div>
	//!  <div style="margin-left:100px;">
	//!   <div style="display:inline-block; width:10px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Container with left margin beside left float")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; height:50px;"></div>
	//!  <div style="margin-right:100px;">
	//!   <div style="display:inline-block; width:10px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Container with right margin beside right float")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; margin:0 10px; border:10px solid white; padding:0 10px;">
	//!  <div style="float:left; width:200px; height:50px;"></div>
	//!  <div style="float:right; width:200px; height:50px;"></div>
	//!  <div style="margin:0 10px; border:10px solid white; padding:0 10px;">
	//!   <div style="margin:0 10px; border:10px solid white; height:100px;">
	//!    <div style="display:inline-block; width:10px; height:10px;"></div>
	//!   </div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Container with line and m/b/p surrounded by floats")
{
	verify(document.getElementById('stf').offsetWidth == 450);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; margin:0 10px; border:10px solid white; padding:0 10px;">
	//!  <div style="float:left; width:200px; height:50px;"></div>
	//!  <div style="float:right; width:200px; height:50px;"></div>
	//!  <div style="margin:0 10px; border:10px solid white; padding:0 10px;">
	//!   <div style="margin:0 10px; border:10px solid white; height:100px;">
	//!    <div style="overflow:hidden; width:10px; height:10px;"></div>
	//!   </div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Container with BFC block and m/b/p surrounded by floats")
{
	verify(document.getElementById('stf').offsetWidth == 450);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; margin:0 10px; border:10px solid white; padding:0 10px;">
	//!  <div style="float:left; width:200px; height:50px;"></div>
	//!  <div style="float:right; width:200px; height:50px;"></div>
	//!  <div style="margin:0 10px; border:10px solid white; padding:0 10px;">
	//!   <div style="margin:0 10px; border:10px solid white; height:100px;">
	//!    <div style="display:table; width:10px; height:10px;"></div>
	//!   </div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Container with table and m/b/p surrounded by floats")
{
	verify(document.getElementById('stf').offsetWidth == 450);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; margin:0 10px; border:10px solid white; padding:0 10px;">
	//!  <div style="float:left; width:200px; height:50px;"></div>
	//!  <div style="float:right; width:200px; height:50px;"></div>
	//!  <div style="margin:0 10px; border:10px solid white; padding:0 10px;">
	//!   <div style="margin:0 10px; border:10px solid white; height:100px;">
	//!    <div style="float:left; width:10px; height:10px;"></div>
	//!   </div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Container with float and m/b/p surrounded by floats")
{
	verify(document.getElementById('stf').offsetWidth == 450);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="margin:0 30px; border:40px solid white; padding:0 30px;">
	//!   <div style="float:left; width:200px; height:100px;"></div>
	//!  </div>
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("Left float following float offset by container m/b/p")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="margin:0 30px; border:40px solid white; padding:0 30px;">
	//!   <div style="float:right; width:200px; height:100px;"></div>
	//!  </div>
	//!  <div style="float:right; width:200px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("Right float following float offset by container m/b/p")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; height:100px;"></div>
	//!  <div style="width:300px;">
	//!   <div style="float:right; width:200px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Right float beside fixed-width container with right float")
disabled; // this doesn't work with the old ShrinkWrappingContainer code either.
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; height:100px;"></div>
	//!  <div style="width:300px;">
	//!   <div style="float:left; width:200px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Right float beside fixed-width container with left float")
disabled; // this doesn't work with the old ShrinkWrappingContainer code either.
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;" dir="rtl">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div style="width:300px;">
	//!   <div style="float:left; width:200px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Left float beside fixed-width container with left float (RTL)")
disabled; // this doesn't work with the old ShrinkWrappingContainer code either.
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;" dir="rtl">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div style="width:300px;">
	//!   <div style="float:right; width:200px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Left float beside fixed-width container with right float (RTL)")
disabled; // this doesn't work with the old ShrinkWrappingContainer code either.
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;" dir="rtl">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div style="float:right; width:200px; height:100px;"></div>
	//!  <div style="width:400px; margin:auto;">
	//!   <div style="float:left; width:200px; height:100px;"></div>
	//!   <div style="float:right; width:200px; height:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Floats beside auto-margin fixed-width container with floats")
disabled; // this doesn't work with the old ShrinkWrappingContainer code either.
{
	verify(document.getElementById('stf').offsetWidth == 800);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; height:100px;"></div>
	//!  <div style="width:400px;">
	//!   <div style="overflow:hidden; width:300px; height:50px;"></div>
	//!  </div>
	//!  <div style="display:inline-block; width:200px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:200px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Right float beside fixed-width with BFC inside")
disabled; // This is possible to solve, but not important enough.
{
	verify(document.getElementById('stf').offsetWidth == 800);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; height:100px;"></div>
	//!  <div style="width:400px;">
	//!   <div style="overflow:hidden; width:500px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Right float beside fixed-width with overflowing BFC inside")
disabled; // this doesn't work with the old ShrinkWrappingContainer code either.
{
	verify(document.getElementById('stf').offsetWidth == 700);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:9px;"></div>
	//!  <div style="display:inline-block; width:110px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside empty container with vertical margins and content")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:10px;"></div>
	//!  <div style="display:inline-block; width:110px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside vertical margin, content below")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:9px;"></div>
	//!  <div style="margin-top:9px;"></div>
	//!  <div style="display:inline-block; width:110px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside collapsing margins and content")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:10px;"></div>
	//!  <div style="margin-top:10px; overflow:hidden;">
	//!   <div style="display:inline-block; width:110px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Float beside collapsing margins, BFC below")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin-top:9px;"></div>
	//!  <div style="margin-top:9px; overflow:hidden;">
	//!   <div style="display:inline-block; width:110px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Float beside collapsing margins and BFC")
{
	verify(document.getElementById('stf').offsetWidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin:50%;"></div>
	//!  <div style="margin:50%;"></div>
	//!  <div style="margin:50%;"></div>
	//!  <div style="margin:50%; width:100px; height:9px;"></div>
	//!  <div style="display:inline-block; width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside % collapsing margins blocks, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="margin:50%;"></div>
	//!  <div style="margin:50%;"></div>
	//!  <div style="margin:50%;"></div>
	//!  <div style="margin:50%; width:100px; height:10px;"></div>
	//!  <div style="display:inline-block; width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside % collapsing margins blocks, content below")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="display:table; margin:50%;"></div>
	//!  <div style="display:table; margin:50%;"></div>
	//!  <div style="display:table; margin:50%;"></div>
	//!  <div style="display:table; margin:50%; width:100px; height:9px;"></div>
	//!  <div style="display:inline-block; width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside % collapsing margins tables, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:10px;"></div>
	//!  <div style="display:table; margin:50%;"></div>
	//!  <div style="display:table; margin:50%;"></div>
	//!  <div style="display:table; margin:50%;"></div>
	//!  <div style="display:table; margin:50%; width:100px; height:10px;"></div>
	//!  <div style="display:inline-block; width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Float beside % collapsing margins tables, content below")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px; margin:50px 0;"></div>
	//!  <div style="height:149px;"></div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float with vertical margins")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px; margin:0 50px;"></div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("Float with horizontal margins")
{
	verify(document.getElementById('stf').offsetWidth == 250);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px; margin:0 50px;"></div>
	//!  <div style="float:left; width:50px; height:50px; margin:0 50px;"></div>
	//! </div>
	//! </body></html>
}
test("Floats with horizontal margins")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:50px; height:50px; padding:10px; border:10px solid white; box-sizing:border-box;"></div>
	//! </div>
	//! </body></html>
}
test("box-sizing:border-box block")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px; padding:10px; border:10px solid white; box-sizing:border-box;"></div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("box-sizing:border-box float beside content")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px; padding:10px; border:10px solid white; box-sizing:border-box;"></div>
	//!  <div style="width:100px; height:50px;"></div>
	//!  <div style="display:inline-block; width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("box-sizing:border-box float above content")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:right; margin:10px;">
	//!  <div style="width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF float using less than available space")
{
	verify(document.getElementById('stf').offsetLeft == 890);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:right; margin:10px;">
	//!  <div style="width:1200px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF float using more than available space")
{
	verify(document.getElementById('stf').offsetLeft == -210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:right; margin:10px;">
	//!  <div style="width:980px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF float using exactly available space #1")
{
	verify(document.getElementById('stf').offsetLeft == 10);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:right;">
	//!  <div style="width:1000px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF float using exactly available space #2")
{
	verify(document.getElementById('stf').offsetLeft == 0);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute; right:0; margin:10px;">
	//!  <div style="width:100px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF abspos using less than available space")
{
	verify(document.getElementById('stf').offsetLeft == 890);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute; right:0; margin:10px;">
	//!  <div style="width:1200px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF abspos using more than available space")
{
	verify(document.getElementById('stf').offsetLeft == -210);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute; right:0; margin:10px;">
	//!  <div style="width:980px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF abspos using exactly available space #1")
{
	verify(document.getElementById('stf').offsetLeft == 10);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute; right:0;">
	//!  <div style="width:1000px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("right-aligned STF abspos using exactly available space #2")
{
	verify(document.getElementById('stf').offsetLeft == 0);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute; right:10px;">
	//!  <div style="width:100px; height:10px;"></div>
	//!  <div id="child1" style="width:10px; height:10px;"></div>
	//!  <div id="child2" style="width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos right-aligned container")
{
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child1').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child2').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 890);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="display:table; position:absolute; right:10px;">
	//!  <div style="width:100px; height:10px;"></div>
	//!  <div id="child1" style="width:10px; height:10px;"></div>
	//!  <div id="child2" style="width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos right-aligned table")
{
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child1').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child2').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 890);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;" dir="rtl">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:100px; height:10px;"></div>
	//!  <div id="child1" style="width:10px; height:10px;"></div>
	//!  <div id="child2" style="width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos container RTL")
require SUPPORT_TEXT_DIRECTION;
{
	verify(document.getElementById('stf').offsetLeft == 800);
	document.getElementById('child1').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 800);
	document.getElementById('child2').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 900);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;" dir="rtl">
	//! <div id="stf" style="display:table; position:absolute;">
	//!  <div style="width:100px; height:10px;"></div>
	//!  <div id="child1" style="width:10px; height:10px;"></div>
	//!  <div id="child2" style="width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("abs-pos table RTL")
require SUPPORT_TEXT_DIRECTION;
{
	verify(document.getElementById('stf').offsetLeft == 800);
	document.getElementById('child1').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 800);
	document.getElementById('child2').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 900);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:right; margin:10px;">
	//!  <div style="width:100px; height:10px;"></div>
	//!  <div id="child1" style="width:10px; height:10px;"></div>
	//!  <div id="child2" style="width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("float right-aligned container")
{
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child1').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child2').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 890);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="display:table; float:right; margin:10px;">
	//!  <div style="width:100px; height:10px;"></div>
	//!  <div id="child1" style="width:10px; height:10px;"></div>
	//!  <div id="child2" style="width:200px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("float right-aligned table")
{
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child1').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 790);
	document.getElementById('child2').style.display = 'none';
	verify(document.getElementById('stf').offsetLeft == 890);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; clear:left; width:100px; height:100px;"></div>
	//!  <div style="float:left; clear:left; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:left on left floats")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; clear:right; width:100px; height:100px;"></div>
	//!  <div style="float:left; clear:right; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:right on left floats")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; clear:both; width:100px; height:100px;"></div>
	//!  <div style="float:left; clear:both; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:both on left floats")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; clear:left; width:100px; height:100px;"></div>
	//!  <div style="float:right; clear:left; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:left on right floats")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; clear:right; width:100px; height:100px;"></div>
	//!  <div style="float:right; clear:right; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:right on right floats")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; clear:both; width:100px; height:100px;"></div>
	//!  <div style="float:right; clear:both; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:both on right floats")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:70px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <div style="float:left; clear:left; width:90px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:left on left float following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:70px; height:100px;"></div>
	//!  <div style="float:right; width:80px; height:99px;"></div>
	//!  <div style="float:left; clear:right; width:90px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:right on left float following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 160);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:70px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <div style="float:left; clear:both; width:90px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:both on left float following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:70px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <div style="float:right; clear:left; width:90px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:left on right float following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:70px; height:100px;"></div>
	//!  <div style="float:right; width:80px; height:99px;"></div>
	//!  <div style="float:right; clear:right; width:90px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:right on right float following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 160);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:70px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <div style="float:right; clear:both; width:90px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:both on right float following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:90px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <div style="clear:left;">
	//!   <div style="display:inline-block; width:100px; height:20px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("clear:left on block following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 180);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:90px; height:100px;"></div>
	//!  <div style="float:right; width:80px; height:99px;"></div>
	//!  <div style="clear:right;">
	//!   <div style="display:inline-block; width:100px; height:20px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("clear:right on block following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:90px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <div style="clear:both;">
	//!   <div style="display:inline-block; width:100px; height:20px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("clear:both on block following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:90px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <br style="clear:left;">
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:left on BR following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 180);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:90px; height:100px;"></div>
	//!  <div style="float:right; width:80px; height:99px;"></div>
	//!  <br style="clear:right;">
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:right on BR following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 190);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:90px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <br style="clear:both;">
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:both on BR following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 170);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:90px; height:99px;"></div>
	//!  <div style="float:right; width:80px; height:100px;"></div>
	//!  <div style="display:inline-block; width:10px; height:20px;"></div>
	//!  <br style="clear:both;">
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:both on BR following content following mixed floats")
{
	verify(document.getElementById('stf').offsetWidth == 180);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:100px; height:10px;"></div>
	//!  <div style="float:left; width:150px; height:100px;"></div>
	//!  <div style="float:left; clear:left; width:100px; height:100px;"></div>
	//!  <div style="float:left; clear:right; width:200px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("clear:right on float, prev. right float bottom < lowest top")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:run-in; width:500px; height:100px;">
	//!   <div style="display:inline-block; width:100px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("run-in block")
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:run-in; width:500px; height:100px;">
	//!   <div style="display:inline-block; width:100px;"></div>
	//!  </div>
	//!  <div></div>
	//! </div>
	//! </body></html>
}
test("run-in inline")
disabled;
/* Our current run-in implementation doesn't support this. We convert the
   run-in from block (which has already propagated its min/max widths to its
   container at the time of conversion) to inline on the fly, and that's just
   not going to work, unless we add some ugly hacks. */
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:5em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with one word")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:5em; height:1em;"></div>
	//!  <div style="display:inline-block; width:5em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with two words")
{
	verify(document.getElementById('stf').offsetWidth > 800);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:20em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with one overflowing word")
{
	verify(document.getElementById('stf').offsetWidth == 1600);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:20em; height:1em;"></div>
	//!  <div style="display:inline-block; width:20em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with two overflowing words")
{
	verify(document.getElementById('stf').offsetWidth == 1600);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { color:white; }</style></head>
	//! <body style="position:relative; width:10000px; margin:0; font-size:16px;">
	//! <div id="stf" style="display:table;">
	//!  <div style="display:inline-block; width:500px; height:20px;"></div>
	//!  <div style="display:inline-block; width:500px; height:20px;"></div>
	//!  <div style="display:inline-block; width:500px; height:20px;"></div>
	//!  <div style="display:inline-block; width:500px; height:20px;"></div>
	//!  <div style="display:inline-block; width:500px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line on table-cell")
{
	verify(document.getElementById('stf').offsetWidth > 2500);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:5em; height:10px;"></div>
	//!  <div style="display:inline-block; width:5em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with em-width float and inline content")
disabled; // Affected by bug CORE-26336
{
	verify(document.getElementById('stf').offsetWidth == 480);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:80px; height:10px;"></div>
	//!  <div style="display:inline-block; width:5em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with float and inline content")
{
	verify(document.getElementById('stf').offsetWidth == 480);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:80px; height:100px;"></div>
	//!  <br>
	//!  <div style="display:inline-block; width:20em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with float, BR, inline content beside")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { font-size:5em; }</style></head>
	//! <body style="position:relative; width:1000px; margin:0; font-size:16px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:80px; height:10px;"></div>
	//!  <br>
	//!  <div style="display:inline-block; width:20em; height:1em;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("::first-line with float, BR, inline content below")
{
	verify(document.getElementById('stf').offsetWidth == 320);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image intrinsic size")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="width:50%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image width 50%")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="width:200%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image width 200%")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="width:200%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image width 200% in narrow CB")
{
	// The AllowZeroSize() stuff in content.cpp forces width to become 1px.

	verify(document.getElementById('stf').offsetWidth <= 1);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="max-width:50px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image max-width smaller than intrinsic width")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="max-width:200px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image max-width larger than intrinsic width")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="min-width:50px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image min-width smaller than intrinsic width")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="max-width:40px; min-width:50px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image min-width larger than max-width")
{
	verify(document.getElementById('stf').offsetWidth == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="min-width:200px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//! </div>
	//! </body>
	//! </html>
}
test("image min-width larger than intrinsic width")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:111px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image intrinsic size float m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:112px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image intrinsic size float m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 112);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; width:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:61px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image width float m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 162);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; width:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:62px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image width float m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; width:50%; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:65px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image width 50% float m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; width:50%; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:112px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image width 50% float m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 112);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; max-width:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:61px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image max-width float m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 162);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; max-width:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:62px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image max-width float m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; min-width:200px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:211px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image min-width float m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 312);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; min-width:200px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:212px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image min-width float m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; height:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:61px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image reduced height float m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 162);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; height:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:62px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image reduced height float m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; height:200px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:211px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image increased height float m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 312);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; height:200px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:212px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image increased height float m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; box-sizing:border-box; width:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:51px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image box-sizing:border-box width m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 152);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; box-sizing:border-box; width:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:52px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image box-sizing:border-box width m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; box-sizing:border-box; height:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:51px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image box-sizing:border-box height m/b/p, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 152);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <img style="float:right; box-sizing:border-box; height:50px; margin:1px; border:2px solid white; padding:3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="height:52px;"></div>
	//!  <div style="display:inline-block; width:100px; height:20px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image box-sizing:border-box height m/b/p, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:50px;"></div>
	//!  <img style="height:10%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <br>
	//!  <div style="display:inline-block; width:300px; height:10px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image with 10% height on line")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:50px;"></div>
	//!  <img style="height:60%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <br>
	//!  <div style="display:inline-block; width:300px; height:10px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image with 60% height on line")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; height:400px;">
	//!  <div style="float:left; width:100px; height:201px;"></div>
	//!  <img style="display:block; width:200px; height:50%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="display:inline-block; width:300px; height:10px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image with fixed width and % height, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute; height:400px;">
	//!  <div style="float:left; width:100px; height:200px;"></div>
	//!  <img style="display:block; width:200px; height:50%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  <div style="display:inline-block; width:300px; height:10px;"></div>
	//! </div>
	//! </body>
	//! </html>
}
test("image with fixed width and % height, content below")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; font-family:ahem;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:40px;"></div>
	//!  <table cellspacing="0" cellpadding="0" style="display:inline-table;">
	//!   <tr><td style="vertical-align:baseline; font-size:38px;"><div style="display:inline-block; width:100px; height:10px;">&nbsp;</div></td></tr>
	//!  </table>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("float beside baseline aligned inline-table, content beside")
disabled; // Not supported properly
{
	verify(document.getElementById('stf').offsetWidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; font-family:ahem;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:40px;"></div>
	//!  <table cellspacing="0" cellpadding="0" style="display:inline-table;">
	//!   <tr><td style="vertical-align:baseline; font-size:40px;"><div style="display:inline-block; width:100px; height:10px;">&nbsp;</div></td></tr>
	//!  </table>
	//!  <br>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("float beside baseline aligned inline-table, content below")
{
	verify(document.getElementById('stf').offsetWidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="float:left;">
	//!   <tr>
	//!    <td style="width:100px; height:100px;">.</td>
	//!   </tr>
	//!  </table>
	//!  <div style="height:99px;"></div>
	//!  <div style="display:inline-block; width:50px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("float table w/ specified cell height, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="float:left;">
	//!   <tr>
	//!    <td style="width:100px; height:100px;">.</td>
	//!   </tr>
	//!  </table>
	//!  <div style="height:100px;"></div>
	//!  <div style="display:inline-block; width:50px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("float table w/ specified cell height, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="float:left;">
	//!   <tr>
	//!    <td style="width:100px; height:10px;">
	//!     <div style="float:left; width:100px; height:100px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//!  <div style="height:99px;"></div>
	//!  <div style="display:inline-block; width:50px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("float table w/ float and specified cell height, content beside")
{
	verify(document.getElementById('stf').offsetWidth == 150);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <table cellspacing="0" cellpadding="0" style="float:left;">
	//!   <tr>
	//!    <td style="width:100px; height:10px;">
	//!     <div style="float:left; width:100px; height:100px;"></div>
	//!    </td>
	//!   </tr>
	//!  </table>
	//!  <div style="height:100px;"></div>
	//!  <div style="display:inline-block; width:50px; height:50px;"></div>
	//! </div>
	//! </body></html>
}
test("float table w/ float and specified cell height, content below")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:500px; height:100px;"></div>
	//!  <div style="float:left; clear:both; width:100px; height:100px;"></div>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("line following cleared left float following wider float")
{
	verify(document.getElementById('stf').offsetWidth == 900);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:500px; height:100px;"></div>
	//!  <div style="float:right; clear:both; width:100px; height:100px;"></div>
	//!  <div style="display:inline-block; width:400px; height:20px;"></div>
	//! </div>
	//! </body></html>
}
test("line following cleared right float following wider float")
{
	verify(document.getElementById('stf').offsetWidth == 900);
}

html
{
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="position:relative; left:150px; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("positioned block")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; position:relative; left:150px; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("positioned float")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; position:relative; left:150px; width:100px; height:100px;"></div>
	//!  <div style="position:relative; left:160px; top:400px; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("positioned float beside positioned BFC-block")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:left;">
	//!  <div id="elm" style="width:500px; height:100px;">
	//!   <div>
	//!    <div style="display:inline-block; width:300px; height:10px;"></div>
	//!   </div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.width = 'auto';</script>
	//! </body></html>
}
test("Change fixed width to auto on block")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:left;">
	//!  <div id="elm" style="width:500px; height:100px; overflow:hidden;">
	//!   <div>
	//!    <div style="display:inline-block; width:300px; height:10px;"></div>
	//!   </div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.width = 'auto';</script>
	//! </body></html>
}
test("Change fixed width to auto on BFC block")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:left;">
	//!  <div id="elm" style="width:500px; height:100px; overflow:hidden;">
	//!   <div style="display:table; table-layout:fixed; width:100%;">
	//!    <div style="display:table-cell;">
	//!     <div style="display:inline-block; width:300px; height:10px;"></div>
	//!    </div>
	//!   </div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.width = 'auto';</script>
	//! </body></html>
}
test("Change fixed width to auto on BFC block w/ fixed-l cell")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:left;">
	//!  <div id="elm" style="width:500px; height:100px; overflow:hidden;">
	//!   <div style="display:table; table-layout:fixed; width:100%;">
	//!    <div style="display:table-caption;">
	//!     <div style="display:inline-block; width:300px; height:10px;"></div>
	//!    </div>
	//!   </div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.width = 'auto';</script>
	//! </body></html>
}
test("Change fixed width to auto on BFC block w/ fixed-l caption")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:left;">
	//!  <div id="elm" style="width:500px; height:100px; overflow:hidden;">
	//!   <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.width = 'auto';</script>
	//! </body></html>
}
test("Change fixed width to auto on BFC block w/ auto-width image")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="float:left;">
	//!  <div id="elm" style="width:500px; height:100px; overflow:hidden;">
	//!   <img style="width:200px; height:200px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAAZQTFRFF0FBNl5edYJQRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kMFQcuM+pK01QAAAAjSURBVDjLY2AAA/v/IPCBYZQ3yhs6PDD1/wBUdJQ3yhsyPABsMISno69NsgAAAABJRU5ErkJggg==">
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.width = 'auto';</script>
	//! </body></html>
}
test("Change fixed width to auto on BFC block w/ fixed-width image")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:100px; height:100px;"></div>
	//!  <div id="elm" style="width:300px;">
	//!   <div>
	//!    <div style="float:right; width:100px; height:50px;"></div>
	//!    <div style="float:right; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="clear:right;">
	//!   <div style="display:inline-block; width:400px; height:50px;"></div>
	//!  </div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldwidth = document.getElementById('stf').offsetWidth;
	//!  document.getElementById('elm').style.width = '299px';
	//! </script>
	//! </body></html>
}
test("Change fixed width on block with floats")
{
	verify(document.getElementById('stf').offsetWidth == 400);
	verify(oldwidth == 500);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left;">
	//!   <div style="width:100px; height:100px;"></div>
	//!  </div>
	//!  <div id="elm" style="float:left; width:100px; height:100px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldwidth = document.getElementById('stf').offsetWidth;
	//!  document.getElementById('elm').style.width = '101px';
	//! </script>
	//! </body></html>
}
test("Change fixed width on float following STF-float")
{
	verify(document.getElementById('stf').offsetWidth == 201);
	verify(oldwidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left;">
	//!   <div id="elm" style="width:500px;">
	//!    <div>
	//!     <div style="display:inline-block; width:200px; height:3px;"></div>
	//!     <div style="display:inline-block; width:200px; height:3px;"></div>
	//!    </div>
	//!   </div>
	//!  </div>
	//!  <br>
	//!  <div style="display:inline-block; width:300px; height:20px;"></div>&#x200b;<div style="display:inline-block; width:300px; height:20px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldwidth = document.getElementById('stf').offsetWidth;
	//!  document.getElementById('elm').style.width = '200px';
	//! </script>
	//! </body></html>
}
test("Change fixed width of container inside float")
{
	verify(document.getElementById('stf').offsetWidth == 800);
	verify(oldwidth == 600);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left;">
	//!   <div style="float:left; width:100px; height:50px;"></div>
	//!   <div style="float:left; clear:left; width:100px; height:50px;"></div>
	//!   <div id="elm" style="position:absolute; width:1px; height:1px;"></div>
	//!  </div>
	//!  <div style="height:99px;"></div>
	//!  <div style="display:inline-block; width:300px; height:20px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldwidth = document.getElementById('stf').offsetWidth;
	//!  document.getElementById('elm').style.width = '2px';
	//! </script>
	//! </body></html>
}
test("Change BFC with wrapping floats")
{
	verify(document.getElementById('stf').offsetWidth == 400);
	verify(oldwidth == 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div id="elm" style="width:300px;">
	//!   <div style="float:left;">
	//!    <div style="display:inline-block; width:100px; height:50px;"></div>
	//!    <div style="display:inline-block; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="display:inline-block; width:10px; height:10px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldwidth = document.getElementById('stf').offsetWidth;
	//!  document.getElementById('elm').style.width = '50px';
	//! </script>
	//! </body></html>
}
test("Change width of width-constrained container with STF float")
{
	verify(document.getElementById('stf').offsetWidth == 110);
	verify(oldwidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div id="elm" style="width:300px;">
	//!   <div style="float:left;">
	//!    <div style="display:inline-block; width:100px; height:50px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="display:inline-block; width:10px; height:10px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldwidth = document.getElementById('stf').offsetWidth;
	//!  document.getElementById('elm').style.width = 'auto';
	//! </script>
	//! </body></html>
}
test("Change container with STF float from width-constrained to auto")
{
	verify(document.getElementById('stf').offsetWidth == 210);
	verify(oldwidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div id="elm">
	//!   <div style="float:left;">
	//!    <div style="display:inline-block; width:100px; height:50px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:50px;"></div>
	//!   </div>
	//!  </div>
	//!  <div style="display:inline-block; width:10px; height:10px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldwidth = document.getElementById('stf').offsetWidth;
	//!  document.getElementById('elm').style.width = '300px';
	//! </script>
	//! </body></html>
}
test("Change container with STF float from auto to width-constrained")
{
	verify(document.getElementById('stf').offsetWidth == 300);
	verify(oldwidth == 210);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <head><style>#stf::first-line { color:inherit; }</style></head>
	//! <body style="position:relative; width:250px;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="display:inline-block; width:200px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:90px; height:10px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  document.body.style.width = '1000px';
	//! </script>
	//! </body></html>
}
test("Change (increase) containing block width of STF ::first-line")
{
	verify(document.getElementById('stf').offsetWidth == 290);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:250px;">
	//! <div id="stf" style="position:absolute; overflow:auto; height:80px;">
	//!  <div id="elm" style="width:10px; height:10px;"></div>
	//!  <div style="display:inline-block; width:200px; height:50px;"></div>
	//!  <div style="display:inline-block; width:200px; height:50px;"></div>
	//! </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  document.getElementById('elm').style.width = '1000px';
	//!  document.body.offsetLeft;
	//! </script>
	//! </body></html>
}
test("Change width of content so that scrollbar disappears")
language c++;
{
	FramesDocument* doc = state.doc;
	verify(OpStatus::IsSuccess(doc->Reflow(FALSE)));
	HTML_Element* stf = doc->GetDocRoot()->GetElmById(UNI_L("stf"));
	verify(stf);
	Box* box = stf->GetLayoutBox();
	verify(box);
	ScrollableArea* sc = box->GetScrollable();
	verify(sc);

	verify(!sc->HasVerticalScrollbar());
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:500px;">
	//!  <div id="stf" style="position:absolute; padding:10% 0;">
	//!   <div style="width:100px; height:100px;"></div>
	//!  </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  var oldheight = document.getElementById('stf').offsetHeight;
	//!  document.body.style.width = '1000px';
	//! </script>
	//! </body>
	//! </html>
}
test("Change CB of STF with % vertical margins")
{
	verify(document.getElementById('stf').offsetHeight == 300);
	verify(oldheight == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:0; font-size:16px;">
	//!  <div id="stf" style="position:absolute;">
	//!   <div style="float:left; width:200px;">&nbsp;<br>&nbsp;</div>
	//!   &nbsp; &nbsp; &nbsp;
	//!   <div>
	//!    <div style="clear:left;">
	//!     <div style="display:inline-block; width:200px; height:100px;"></div>
	//!    </div>
	//!   </div>
	//!  </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  document.body.style.width = '1000px';
	//! </script>
	//! </body></html>
}
test("Change CB from 0 of STF with float, text and clearance")
{
	verify(document.getElementById('stf').offsetWidth < 400);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//!  <div id="stf" style="position:absolute;">
	//!   <div style="width:500px;">
	//!    <div id="float" style="float:left;">
	//!     <div style="width:7px; height:10px;"></div>
	//!      <div id="inner1" style="display:none; width:100px; height:10px;"></div>&#x200b;<div id="inner2" style="display:none; width:100px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:10px;"></div>
	//!    </div>
	//!   </div>
	//!  </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  document.getElementById('inner1').style.display = 'inline-block';
	//!  document.getElementById('inner2').style.display = 'inline-block';
	//! </script>
	//! </body>
	//! </html>
}
test("Add wider line content to float in w-restricted")
{
	verify(document.getElementById('stf').offsetWidth == 500);
	verify(document.getElementById('float').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//!  <div id="stf" style="position:absolute;">
	//!   <div style="width:500px;">
	//!    <div id="float" style="float:left;">
	//!     <div style="width:7px; height:10px;"></div>
	//!     <div id="inner" style="display:none;">
	//!      <div style="display:inline-block; width:100px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:100px; height:10px;"></div>
	//!     </div>
	//!    </div>
	//!   </div>
	//!  </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  document.getElementById('inner').style.display = 'block';
	//! </script>
	//! </body>
	//! </html>
}
test("Add wider line content to container in float in w-restricted")
{
	verify(document.getElementById('stf').offsetWidth == 500);
	verify(document.getElementById('float').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//!  <div id="stf" style="position:absolute;">
	//!   <div style="width:500px;">
	//!    <div id="float" style="float:left;">
	//!     <div style="width:7px; height:10px;"></div>
	//!     <div id="inner" style="display:none; width:300px; height:10px;"></div>
	//!    </div>
	//!   </div>
	//!  </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  document.getElementById('inner').style.display = 'block';
	//! </script>
	//! </body>
	//! </html>
}
test("Add wider block to float in w-restricted")
{
	verify(document.getElementById('stf').offsetWidth == 500);
	verify(document.getElementById('float').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="position:relative; width:1000px;">
	//!  <div id="stf" style="position:absolute;">
	//!   <div style="width:500px;">
	//!    <div id="float" style="float:left;">
	//!     <div style="width:7px; height:10px;"></div>
	//!     <div id="inner" style="display:none;">
	//!      <div style="width:300px; height:10px;"></div>
	//!     </div>
	//!    </div>
	//!   </div>
	//!  </div>
	//! <script>
	//!  document.body.offsetLeft;
	//!  document.getElementById('inner').style.display = 'block';
	//! </script>
	//! </body>
	//! </html>
}
test("Add wider block to container in float in w-restricted")
{
	verify(document.getElementById('stf').offsetWidth == 500);
	verify(document.getElementById('float').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div id="elm" style="float:left; width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.display = 'none';</script>
	//! </body></html>
}
test("Remove float box")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div id="elm" style="float:left; width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; var elm = document.getElementById('elm'); elm.parentNode.removeChild(elm);</script>
	//! </body></html>
}
test("Remove float element")
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div id="elm" style="width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.display = 'none';</script>
	//! </body></html>
}
test("Remove block box following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div id="elm" style="width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; var elm = document.getElementById('elm'); elm.parentNode.removeChild(elm);</script>
	//! </body></html>
}
test("Remove block element following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div id="elm" style="overflow:hidden; width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.display = 'none';</script>
	//! </body></html>
}
test("Remove non-visible overflow block box following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div id="elm" style="overflow:hidden; width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; var elm = document.getElementById('elm'); elm.parentNode.removeChild(elm);</script>
	//! </body></html>
}
test("Remove non-visible overflow block element following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div id="elm" style="display:table; width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.display = 'none';</script>
	//! </body></html>
}
test("Remove table box following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <div id="elm" style="display:table; width:200px; height:100px;"></div>
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; var elm = document.getElementById('elm'); elm.parentNode.removeChild(elm);</script>
	//! </body></html>
}
test("Remove table element following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <img id="elm" style="display:block; width:200px; height:100px;" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////ywAAAAAAQABAAACAkQBADs=">
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; document.getElementById('elm').style.display = 'none';</script>
	//! </body></html>
}
test("Remove image block box following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:200px; height:100px;"></div>
	//!  <img id="elm" style="display:block; width:200px; height:100px;" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////ywAAAAAAQABAAACAkQBADs=">
	//!  <div>
	//!   <div style="display:inline-block; width:100px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! <script>document.body.offsetLeft; var elm = document.getElementById('elm'); elm.parentNode.removeChild(elm);</script>
	//! </body></html>
}
test("Remove image block element following float")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:0;">&nbsp;</div>
	//! </div>
	//! </body></html>
}
test("zero-width container with content") // inspired by bug CORE-31330
{
	verify(document.getElementById('stf').offsetWidth == 0);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; width:50px; height:50px; margin-left:-100px;"></div>
	//!  <div style="display:inline-block; width:100px; height:100px;"></div>
	//! </div>
	//! </body></html>
}
test("Float with negative margin") // Inspired by bug CORE-31209
{
	verify(document.getElementById('stf').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:left; column-count:3; column-width:200px; column-gap:10px; margin:1px; border:2px solid; padding:3px;">
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!  </div>
	//! </div>
	//! </body></html>
}
test("STF multicol with column-width and column-count")
{
	verify(document.getElementById('stf').offsetWidth == 632);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="width:10px; column-count:3; column-width:200px; column-gap:10px; margin:1px; border:2px solid; padding:3px;">
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!   filler filler filler filler filler filler filler filler filler
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Fixed-width multicol with column-width and column-count")
{
	verify(document.getElementById('stf').offsetWidth == 22);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="column-count:3; column-gap:10px;">
	//!   <div style="width:500px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Auto-width multicol with column-count")
{
	verify(document.getElementById('stf').offsetWidth == 1520);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="column-width:200px; column-gap:10px;">
	//!   <div style="display:inline-block; width:50px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Auto-width multicol with column-width and little content")
{
	verify(document.getElementById('stf').offsetWidth == 200);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="column-width:200px; column-gap:10px;">
	//!   <div style="display:inline-block; width:150px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:150px; height:10px;"></div>&#x200b;<div style="display:inline-block; width:150px; height:10px;"></div>
	//!  </div>
	//! </div>
	//! </body></html>
}
test("Auto-width multicol with column-width and more content")
{
	verify(document.getElementById('stf').offsetWidth == 450);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; height:200px; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px;">
	//!   filler filler filler filler filler filler filler filler filler
	//!  </div>
	//!  <div style="height:211px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width/fixed-height floated multicol, line beside")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; height:200px; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px;">
	//!   filler filler filler filler filler filler filler filler filler
	//!  </div>
	//!  <div style="height:212px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width/fixed-height floated multicol, line below")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px; line-height:200px;">
	//!   <div style="display:inline-block; width:60px; height:10px;"></div>
	//!  </div>
	//!  <div style="height:211px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width/auto-height floated multicol, line beside")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; width:200px; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px; line-height:200px;">
	//!   <div style="display:inline-block; width:60px; height:10px;"></div>
	//!  </div>
	//!  <div style="height:212px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-width/auto-height floated multicol, line below")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; height:200px; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px; line-height:100px;">
	//!   <div style="display:inline-block; width:60px; height:10px;"></div>
	//!  </div>
	//!  <div style="height:211px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Auto-width/fixed-height floated multicol, line beside")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; height:200px; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px; line-height:100px;">
	//!   <div style="display:inline-block; width:60px; height:10px;"></div>
	//!  </div>
	//!  <div style="height:212px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Auto-width/fixed-height floated multicol, line below")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px; line-height:200px;">
	//!   <div style="display:inline-block; width:60px; height:10px;"></div><br>
	//!   <div style="display:inline-block; width:60px; height:10px;"></div><br>
	//!   <div style="display:inline-block; width:60px; height:10px;"></div><br>
	//!  </div>
	//!  <div style="height:211px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Auto-width/auto-height floated multicol, line beside")
{
	verify(document.getElementById('stf').offsetWidth == 300);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; column-count:3; column-gap:10px; margin:1px; border:2px solid; padding:3px; line-height:200px; orphans:0; widows:0;">
	//!   <div style="display:inline-block; width:60px; height:10px;"></div><br>
	//!   <div style="display:inline-block; width:60px; height:10px;"></div><br>
	//!   <div style="display:inline-block; width:60px; height:10px;"></div><br>
	//!  </div>
	//!  <div style="height:212px;"></div>
	//!  <div style="display:inline-block; width:88px; height:10px;"></div>
	//! </div>
	//! </body></html>
}
test("Auto-width/auto-height floated multicol, line below")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute; display:flex; margin:1px; border:2px solid; padding:3px;">
	//!  <div style="width:100px; height:200px;"></div>
	//! </div>
	//! </body></html>
}
test("Auto-height floated flexbox")
{
	verify(document.getElementById('stf').offsetWidth == 110);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; display:flex; margin:1px; border:2px solid; padding:3px;">
	//!   <div style="width:100px; height:188px;"></div>
	//!  </div>
	//!  <div style="height:199px;"></div>
	//!  <div style="float:left; width:100px; height:1px;"></div>
	//!  <div style="height:1px;"></div>
	//!  <div style="float:left; width:150px; height:1px;"></div>
	//! </div>
	//! </body></html>
}
test("Auto-sized floated flexbox")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body style="position:relative; width:1000px; margin:0;">
	//! <div id="stf" style="position:absolute;">
	//!  <div style="float:right; display:flex; width:100px; height:188px; margin:1px; border:2px solid; padding:3px;">
	//!   <div style="width:1000px; height:1880px;"></div>
	//!  </div>
	//!  <div style="height:199px;"></div>
	//!  <div style="float:left; width:100px; height:1px;"></div>
	//!  <div style="height:1px;"></div>
	//!  <div style="float:left; width:150px; height:1px;"></div>
	//! </div>
	//! </body></html>
}
test("Fixed-sized floated flexbox")
{
	verify(document.getElementById('stf').offsetWidth == 212);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="margin:0">
	//!   <div style="width: 200px; height:100px;">
	//!    <div style="width: 100px; height: 100%;">
	//!     <div id="testme" style="float: right; height: 100%;">
	//!      <img style="height: 100%; background: green;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1QwQCB0CBL/BKgAAAAh0RVh0Q29tbWVudAD2zJa/AAAADUlEQVR42mNgYGBgAAAABQABeqhXUAAAAABJRU5ErkJggg==">
	//!     </div>
	//!    </div>
	//!   </div>
	//! </body>
	//! </html>
}
test("Fixed height ancestor dependency")
{
	verify(document.getElementById('testme').offsetLeft == 0);
}

html
{
	//! <!DOCTYPE html>
	//! <html>
	//! <body style="margin:0">
	//!  <div style="height: 100px; width: 100px; overflow: auto;">
	//!   <div style="float:left; height:100px; width:50px; background: green;"></div>
	//!   <div id="testme" style="float:left">
	//!    <div style="height:100px; width:50px; background: lime;"></div>
	//!   </div>
	//!  </div>
	//! </body>
	//! </html>
}

test("Float min/max calculation not triggering unwanted scrollbars")
{
	verify(document.getElementById('testme').offsetTop == 0);
	verify(document.getElementById('testme').offsetLeft == 50);
}

html
{
	//! <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
	//! <html><body style="margin:0">
	//!  <div style="float:left;">
	//!   <div style="float:left;">
	//!    <div style="width: 100px; height: 100px; background-color:lime;"></div>
	//!   </div>
	//!   <div style="float:left;" id="testme">
	//!    <div style="text-indent:-2em;">X X</div>
	//!   </div>
	//!  </div>
	//! </body></html>
}

test("Line's min/max width for negative text indent")
{
	verify(document.getElementById('testme').offsetTop < 100);
}

html
{
//! <!DOCTYPE html>
//! <html>
//!  <body style="margin:0">
//!   <div style="float: left; background: green;">
//!    <div style="margin-top: 100px; width: 50px; height: 0; float: left; background: lime;"></div>
//!    <div id="testme" style="margin-top: 100px; width: 50px; height: 0; float: left; background: pink;"></div>
//!   </div>
//!  </body>
//! </html>
}

test("Float's top outer edge calculation")
{
	verify(document.getElementById('testme').offsetLeft == 50);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body>
	//!  <div id="testme" style="float: left; height: 50px;">
	//!   <div style=" float: left; width: 100px; overflow-y: scroll;"></div>
	//!  </div>
	//! </body></html>
}
test("Min/max width and scrollbars in non-auto width containers #1")
{
	verify(document.getElementById('testme').offsetWidth == 100);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body>
	//!  <div id="testme" style="float: left; height: 50px;">
	//!   <div style="float: left; width: 100px; max-height: 100px; overflow-y: auto;">
	//!    <div style="width:1px; height: 200px;"></div>
	//!   </div>
	//!  </div>
	//! </body></html>
}
test("Min/max width and scrollbars in non-auto width containers #2")
{
	verify(document.getElementById('testme').offsetWidth == 100);
}

html
{
	//! <html><body>
	//!  <div id="testme" style="float: left; font: 20px/1 'Ahem';">
	//!   <span style="padding-left: 10px; background: gray;"></span>
	//!   <img style="float: left;" src="100x100-navy.png" >
	//!   XXXXXXX
	//!  </div>
	//! </body></html>
}
test("quirk: Float beside empty line")
{
	verify(document.getElementById('testme').offsetWidth >= 250);
}

html
{
	//! <!DOCTYPE html>
	//! <html><body>
	//!  <div style="width:200px">
	//!   <div id="testme" style="float:left; text-indent:50%; height:1em; background:red;">
	//!    <div style="display:inline-block; width: 20px; height: 1em;"></div>
	//!   </div>
	//!  </div>
	//! </body></html>
}

test("Min/Max calculation not polluted by percentage text-indent")
{
	verify(document.getElementById('testme').offsetWidth == 20);
}
