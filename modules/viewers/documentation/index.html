<html>
 <head>
  <title>The viewers module</title>
  <link rel="stylesheet" href="../../coredoc/coredoc.css" type="text/css" media="all">
  <link rel="contents" href="../../coredoc/index.html" type="text/html" title="Core API">
 </head>
 <body>
  <h1>The viewers module</h1>
  <p>The viewers module is documented in Doxygen format in the source files.
  Please run doxygen in the <code>modules/viewers/documentation/</code>
  directory, then read the <a href="api/index.html">created documentation</a>.

  <h2 id="howtoupdate">The VIEWERS system</h2>
  <p>
  The viewer list is maintained through the viewers system.
  Edit the file
  <a href="../module.viewers"><kbd>module.viewers</kbd></a>
  in the module's top-level directory, and then run the
  <kbd>operasetup.py</kbd> script as usual (this is normally done through the
  build system) to update the viewer list.
  You can also update the list manually by running the
  <kbd>viewers.py</kbd> script in the <kbd>src</kbd>
  sub-directory.
  </p>

  <h2>Used OOM policies</h2>

  <h2>Who is handling OOM?</h2>

  <h2>Description of flow</h2>

  <h2>Heap memory usage</h2>
  <p>Viewers keeps some lists of objects in memory. Each object is quite small,
  but there might be quite a few of them (like the list of viewers/plugins).
  Overall, allocated memory should be in the KB range, not MB.
  </p>

  <h2>Stack memory usage</h2>

  <h2>Static memory usage</h2>
  <p>generated_viewers_data.inc includes a large array of pre-defined
  mime-types.</p>

  <h2>Caching and freeing memory</h2>

  <h2>Freeing memory on exit</h2>
  <p>Memory is freed in ViewersModule::Destroy, called when terminating
  Opera.</p>

  <h2>Temp buffers</h2>
  <p>Temp buffers are used in Viewers::InsertViewer, Viewers::FindViewer,
  Viewers::GetViewAction and Viewers::ConfirmViewer. Especially
  Viewers::GetViewAction should be trivial to rewrite.</p>

  <h2>Memory tuning</h2>
  <p>module.viewers controls how many plugins should be known (and kept in the
  list in memory).</p>

  <h2>Suggestions of improvements</h2>
  <p>Viewers should be redesigned to not store as much data as it does now.</p>
 </body>
</html>
