<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
          "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <link rel="stylesheet" href="scope.css" />
    <title>Scope JavaScript API</title>
</head>
<body>
    <h1>
        Scope JavaScript API</h1>
    <p>
        This document describes the JavaScript functions provided to special debugger windows in Opera. The functions provide a
        means to communicate with scope.</p>
    <p>
        A very basic implementation can be found in <code>modules/scope/clients/scope-js-client/scope-js-api.html</code>. A real
        world example is the Opera Dragonfly application.</p>
    <p>
        This API is only available to windows with a <code>Window_Type</code> value <code>WIN_TYPE_DEVTOOLS</code>.</p>
    <h2>
        Functions provided by Opera</h2>
    <p>
        The following functions exists on the opera object:</p>
    <pre>
scopeAddClient(host_connected, receive_data, host_quit, port)
scopeEnableService(service)
scopeTransmit(service, data)
</pre>
    <p>
        The parameters are as follows:</p>
    <dl>
        <dt>host_connected</dt>
        <dd>
            This is a callback function called when a host connects.
        </dd>
        <dd>
            It is called immediately if a host is already connected.</dd>
        <dd>
            It must have the signature <code>host_connected(services)</code> where <code>services</code> is a comma-separated list of
            the services offered by the host.</dd>
        <dt>receive_data</dt>
        <dd>
            This is a callback function called when data is received from the host.</dd>
        <dd>
            It must have the signature <code>receive(service, data)</code> where <code>service</code> is the sending service and <code>data</code>
            is the data sent.</dd>
        <dt>host_quit</dt>
        <dd>
            This is a callback function called when the host quits.</dd>
        <dd>
            It must have the signature <code>host_quit()</code>.</dd>
        <dt>service</dt>
        <dd>
            This is a string containing the service name, e.g. "<code>console-logger</code>" to enable or transmit data to.</dd>
        <dt>data</dt>
        <dd>
            This is a string containing containing the data to be sent, defined by the according service's protocol document.</dd>
    </dl>
</body>
</html>
