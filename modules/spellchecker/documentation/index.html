<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en" dir="ltr">
<head>
 <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
 <title>DOM module</title>
 <link rev="made" href="mailto:jl@opera.no">
 <link rel="stylesheet" href="../../coredoc/coredoc.css" type="text/css">
 <link rel="contents" href="../../coredoc/index.html" type="text/html" title="Core API">
 <style type="text/css">
  pre { border-left: 2px solid #ddd; }
 </style>
</head>

<body>
 <h1>Spellchecker module</h1>
 <h2>Introduction</h2>
 <p>
   This is the core Spellchecker module that uses Hunspell
   dictionaries used to spell check for instance text areas, elements
   with contentEditable and documents in designMode. This is a
   complete rewrite of a spell checker from scratch. It supersedes the
   old adjunct Spellcheck module that uses the system's aspell binary.
 </p>

 <p>
  <a href="https://wiki.oslo.opera.com/developerwiki/Modules/spellchecker">Current
  information about the Spellchecker module</a>.
 </p>

 <h2>
  <abbr title="Application Programming Interface">API</abbr>
  documentation
 </h2>
 <p>
  For detailed information on how to use the Spellchecker module in Opera and
  the module's public API, please refer to the

    <a href="api/index.html">API documentation</a>.

  The documentation needs to be generated by Doxygen.
 </p>

 <h2>
   Internal data structures
 </h2>
 <p>
   See the <a href="data-structures.html">overview of the fundamental
     data structures</a> for a detailed description of the internals.
 </p>

 <h2>Memory management</h2>

 <h3>OOM policy</h3>

 <p>
   Out of memory handling is handled by propagating OP_STATUS
   values. On OOM we disable the spell checker and inform any listeners.
 </p>

 <h3>Heap memory usage</h3>
 <p>
   All dictionaries are transformed to our internal format and stored
   on the heap. Some complex dictionaries (e.g., hu_HU) can take
   a considerable amount of heap memory (>100 MB).
 </p>
 <h3>Stack memory usage</h3>
 <p>
   There might be some recursive methods that might theoretically use
   all stack, but no such methods are known to have caused
   problems. The module also uses some stack arrays as temporary
   buffers.
 </p>
 <h3>Memory ownership</h3>
 <p>
   Most heap memory (the dictionary radix tree) are owned by the
   global OpSpellcheckerManager. Each SpellCheckerSession has some
   memory and the user of SpellCheckerSession is responsible for
   appropriate deletion of the session.
 
<h3>Temporary buffers</h3>
 <p>
   No global temporary buffers are used.
 </p>
<h3>Memory tuning</h3>
 <p>
   Some minor tuning can be done. See the tweaks in module.tweaks file.
 </p>
 <h3>Tests and coverage</h3>
 <p>
   The selftests are providing sufficient coverage.
 </p>
<h3>Design choices</h3>
 <p>
   The spell checker calculates all possible words and store them in a
   radix tree to speed up the checking.
 </p>
   
<h3>Improvements</h3>
 <p>
   Due to the extensive memory usage for certain dictionaries it
   should use a more lazy approach when determining if a word is correctly
   spelled or not.
 </p>
</body>
</html>
